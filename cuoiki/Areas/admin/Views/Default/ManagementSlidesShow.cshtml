@{
    ViewBag.Title = "index";
    Layout = "~/Areas/admin/Views/Shared/_MyLayout.cshtml";
}

<h2>Welcome to Menu</h2>

<style>
    td {
        text-align: center;
    }
</style>

<body>
    <div class="row">
        <div class="col-lg-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <form class="form-inline float-right">
                        <input class="form-control mr-sm-2" type="text" placeholder="Search">
                        <button class="btn btn-primary" type="submit">Search</button>
                    </form>
                </div>
                <div class="panel-body">
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered table-hover">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Title</th>
                                    <th>Description</th>
                                    <th>Link</th>
                                    <th>Meta</th>

                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var i in ViewBag.list)
                                {
                                    <tr>
                                        <td>
                                            @i[0]
                                        </td>
                                        <td>
                                            @i[1]
                                        </td>
                                        <td>
                                            @i[2]
                                        </td>
                                        <td>
                                            @i[3]
                                        </td>
                                        <td>
                                            @i[4]
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                    <div class="clearfix"></div>
                    <ul class="pagination pull-right">
                        <li class="page-item"><a class="page-link" href="#">Previous</a></li>
                        <li class="page-item active"><a class="page-link" href="#">1</a></li>
                        <li class="page-item"><a class="page-link" href="#">2</a></li>
                        <li class="page-item"><a class="page-link" href="#">3</a></li>
                        <li class="page-item"><a class="page-link" href="#">Next</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <!-- Popper.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <!-- Bootstrap 4 -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>

    <script>
        $(document).ready(function () {
            // Tìm kiếm
            $('#search-form').submit(function (event) {
                event.preventDefault();
                var query = $('#search-input').val();
                $('tbody tr').each(function () {
                    if ($(this).text().indexOf(query) !== -1) {
                        $(this).show();
                    } else {
                        $(this).hide();
                    }
                });
            });

            // Sắp xếp cột
            $('th').click(function () {
                var column = $(this).index() + 1;
                var order = $(this).hasClass('asc') ? -1 : 1;
                $('tbody tr').sort(function (a, b) {
                    var aText = $(a).find('td:nth-child(' + column + ')').text().trim();
                    var bText = $(b).find('td:nth-child(' + column + ')').text().trim();
                    if (isNaN(aText) || isNaN(bText)) {
                        return aText.localeCompare(bText) * order;
                    } else {
                        return (parseFloat(aText) - parseFloat(bText)) * order;
                    }
                }).appendTo('tbody');
                $('th').removeClass('asc desc');
                $(this).addClass(order == 1 ? 'asc' : 'desc');
            });

            // Phân trang
            var rowsPerPage = 10;
            var totalPages = Math.ceil($('tbody tr').length / rowsPerPage);
            for (var i = 1; i <= totalPages; i++) {
                $('.pagination').append('<li class="page-item"><a class="page-link" href="#">' + i + '</a></li>');
            }
            $('.pagination li:first-child').addClass('active');
            $('.pagination li').click(function () {
                var pageNum = $(this).find('a').text();
                var startRow = (pageNum - 1) * rowsPerPage;
                var endRow = startRow + rowsPerPage - 1;
                $('tbody tr').css('display', 'none').slice(startRow, endRow + 1).fadeIn(200);
                $('.pagination li').removeClass('active');
                $(this).addClass('active');
            });
        });
    </script>
